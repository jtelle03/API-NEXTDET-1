init_data:
  get:
    tags:
      - Propiedad
    operationId: initDataPropiedad
    description: Obtiene los datos iniciales de la propiedad
    responses:
      200:
        description: Consulta exitosa.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Acción exitosa.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  type: object
                  properties:
                    categoriaPropiedades:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            type: integer
                          nombre:
                            type: string
                            example: "Casa"
                          nombre_ingles:
                            type: string
                            example: "House"
                          estado:
                            type: integer
                            example: 1
                          estado_nombre:
                            type: string
                            example: "Activo"
                          url_imagen::
                            type: string
                            example: "https://nextdet.com/images/categoria_propiedad/1.jpg"
                    condicionPropiedades:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          nombre:
                            type: string
                            example: "Vendida"
                          nombre_ingles:
                            type: string
                            example: "Sold"
                          estado:
                            type: integer
                            example: 1
                          estado_nombre:
                            type: string
                            example: "Activo"
                          url_imagen:
                            type: string
                            example: "https://nextdet.com/images/condicion_propiedad/1.jpg"
                    paises:
                      type: array
                      items:
                        $ref: "../schemas/pais.yml#/Pais"
                    estadosPropiedad:
                      type: array
                      items:
                        $ref: "../schemas/estado.yml#/Estado"
      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

list_all:
  get:
    tags:
      - Propiedad
    operationId: listAllPropiedades
    description: Obtiene todos los datos de las propiedades
    parameters:
      - name: page
        in: query
        description: Número de página
        required: false
        schema:
          type: integer
      - name: page_row
        in: query
        description: Número de filas por página
        required: false
        schema:
          type: integer
      - name: condicion_id
        in: query
        description: ID de la condición
        required: false
        schema:
          type: integer
      - name: condicion_propiedad_id
        in: query
        description: ID de la condición de propiedad
        required: false
        schema:
          type: integer
      - name: fecha_desde
        in: query
        description: Fecha desde (formato YYYY-MM-DD)
        required: false
        schema:
          type: string
          format: date
      - name: fecha_hasta
        in: query
        description: Fecha hasta (formato YYYY-MM-DD)
        required: false
        schema:
          type: string
          format: date
      - name: pais_id
        in: query
        description: ID del país
        required: false
        schema:
          type: integer
    responses:
      200:
        description: Consulta Exitosa.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Consulta Exitosa.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  type: object
                  properties:
                    total:
                      type: integer
                      example: 1
                    propiedades:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          titulo:
                            type: string
                            example: "Propiedad 1"
                          sku:
                            type: string
                            example: "SKU-00001"
                          descripcion:
                            type: string
                            example: "Propiedad 1 descripcion"
                          anio:
                            type: string
                            example: "2020"
                          categoria_nombre:
                            type: string
                            example: "Departamento"
                          categoria_nombre_ingles:
                            type: string
                            example: "Apartment"
                          condicion_nombre:
                            type: string
                            example: "Vendida"
                          condicion_nombre_ingles:
                            type: string
                            example: "Sold"
                          pais_id:
                            type: integer
                            example: 41
                          pais_nombre:
                            type: string
                            example: "Chile"
                          pais_nombre_ingles:
                            type: string
                            example: "Chile"
                          ciudad:
                            type: string
                            example: "Santiago"
                          caracteristicas:
                            type: object
                            example:
                              baños: 2
                              cuartos: 2
                              Cochera: "Sí"
                          metros_construccion:
                            type: number
                            example: 1000
                          metros_terreno:
                            type: number
                            example: 15000
                          pies_construccion:
                            type: number
                            example: 10764
                          pies_terreno:
                            type: number
                            example: 157640
                          latitud:
                            type: number
                            example: -33.4489
                          longitud:
                            type: number
                            example: -70.6693
                          precio_uf:
                            type: number
                            example: 1000000
                          precio_usd:
                            type: number
                            example: 1000000
                          aprobado:
                            type: number
                            example: 1
                          estado_solicitud:
                            type: integer
                            example: 5
                          estado_solicitud_nombre:
                            type: string
                            example: "Inactivo"
                          url_portada:
                            type: string
                            example: "http://localhost:8888/images?image=abb255e1fe98ed8331a6d0b0521ee828.jpg"
                    propiedades_mas_destacadas:
                      type: array
                      items:
                        type: object
                        properties:
                          categoria_id:
                            type: integer
                            example: 2
                          categoria_nombre:
                            type: string
                            example: "Departamento"
                          categoria_nombre_ingles:
                            type: string
                            example: "Apartment"
                          propiedad_destacado:
                            type: object
                            properties:
                              propiedad_id:
                                type: integer
                                example: 1
                              titulo:
                                type: string
                                example: "Propiedad 1"
                              sku:
                                type: string
                                example: "SKU-00001"
                              descripcion:
                                type: string
                                example: "Propiedad 1 descripcion"
                              anio:
                                type: string
                                example: "2020"
                              pais_id:
                                type: integer
                                example: 41
                              pais_nombre:
                                type: string
                                example: "Chile"
                              pais_nombre_ingles:
                                type: string
                                example: "Chile"
                              ciudad:
                                type: string
                                example: "Santiago"
                              estado_solicitud:
                                type: integer
                                example: 5
                              url_portada:
                                type: string
                                example: "http://localhost:8888/images?image=abb255e1fe98ed8331a6d0b0521ee828.jpg"

      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

list_all_propiedad_id:
  get:
    tags:
      - Propiedad
    operationId: listAllPropiedad
    description: Obtiene todos los datos de la propiedad
    parameters:
      - name: propiedad_id
        in: path
        description: ID de la propiedad
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Consulta exitosa.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Consulta Exitosa.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  type: object
                  properties:
                    id:
                      type: integer
                      example: 1
                    sku:
                      type: string
                      example: "SKU-00001"
                    titulo:
                      type: string
                      example: "Propiedad 1"
                    descripcion:
                      type: string
                      example: "Propiedad 1 descripcion"
                    anio:
                      type: string
                      example: "2020"
                    pais_id:
                      type: integer
                      example: 41
                    pais_nombre:
                      type: string
                      example: "Chile"
                    pais_nombre_ingles:
                      type: string
                      example: "Chile"
                    ciudad:
                      type: string
                      example: "Santiago"
                    categoria_nombre:
                      type: string
                      example: "Departamento"
                    categoria_nombre_ingles:
                      type: string
                      example: "Apartment"
                    condicion_id:
                      type: integer
                      example: 1
                    condicion_nombre:
                      type: string
                      example: "Vendida"
                    condicion_nombre_ingles:
                      type: string
                      example: "Sold"
                    caracteristicas:
                      type: object
                      properties:
                        baños:
                          type: integer
                          example: 2
                        cuartos:
                          type: integer
                          example: 2
                        Cochera:
                          type: string
                          example: "Sí"
                    metros_construccion:
                      type: integer
                      example: 1000
                    metros_terreno:
                      type: integer
                      example: 15000
                    pies_construccion:
                      type: number
                      example: 10764
                    pies_terreno:
                      type: number
                      example: 157640
                    latitud:
                      type: number
                      example: -33.4489
                    longitud:
                      type: number
                      example: -70.6693
                    precio_uf:
                      type: number
                      example: 1000000
                    precio_usd:
                      type: number
                      example: 1000000
                    estado_solicitud:
                      type: integer
                      example: 5
                    estado_solicitud_nombre:
                      type: string
                      example: "Inactivo"
                    url_portada:
                      type: array
                      items:
                        type: string
                      example:
                        - "http://localhost:8888/images?image=abb255e1fe98ed8331a6d0b0521ee828.jpg"
                        - "http://localhost:8888/images?image=ef0ecbcd717f9caf363aa0ec703fffd8.jpg"
      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

list:
  get:
    tags:
      - Propiedad
    operationId: listPropiedad
    description: Obtiene todos los datos de las propiedades con filtro de página
    parameters:
      - name: page
        in: query
        description: Número de página
        required: false
        schema:
          type: integer
      - name: page_row
        in: query
        description: Número de filas por página
        required: false
        schema:
          type: integer
      - name: condicion_id
        in: query
        description: ID de la condición
        required: false
        schema:
          type: integer
      - name: condicion_propiedad_id
        in: query
        description: ID de la condición de propiedad
        required: false
        schema:
          type: integer
      - name: fecha_desde
        in: query
        description: Fecha desde (formato YYYY-MM-DD)
        required: false
        schema:
          type: string
          format: date
      - name: fecha_hasta
        in: query
        description: Fecha hasta (formato YYYY-MM-DD)
        required: false
        schema:
          type: string
          format: date
      - name: pais_id
        in: query
        description: ID del país
        required: false
        schema:
          type: integer
      - name: pagina
        in: query
        description: Filtro tipo string correspondiente a la página origen de la consulta
        required: false
        schema:
          type: string
    responses:
      200:
        description: Consulta exitosa.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Consulta Exitosa.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  type: object
                  properties:
                    total:
                      type: integer
                      example: 1
                    propiedades:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          titulo:
                            type: string
                            example: "Propiedad 1"
                          anio:
                            type: string
                            example: "2020"
                          descripcion:
                            type: string
                            example: "Propiedad 1 descripcion"
                          categoria_id:
                            type: integer
                            example: 2
                          categoria_nombre:
                            type: string
                            example: "Departamento"
                          categoria_nombre_ingles:
                            type: string
                            example: "Apartment"
                          condicion_id:
                            type: integer
                            example: 1
                          condicion_nombre:
                            type: string
                            example: "Vendida"
                          condicion_nombre_ingles:
                            type: string
                            example: "Sold"
                          pais_id:
                            type: integer
                            example: 41
                          pais_nombre:
                            type: string
                            example: "Chile"
                          pais_nombre_ingles:
                            type: string
                            example: "Chile"
                          ciudad:
                            type: string
                            example: "Santiago"
                          caracteristicas:
                            type: object
                            properties:
                              baños:
                                type: integer
                                example: 2
                              cuartos:
                                type: integer
                                example: 2
                              Cochera:
                                type: string
                                example: "Sí"
                          metros_construccion:
                            type: integer
                            example: 1000
                          metros_terreno:
                            type: integer
                            example: 15000
                          pies_construccion:
                            type: number
                            example: 10764
                          pies_terreno:
                            type: number
                            example: 157640
                          latitud:
                            type: number
                            example: -33.4489
                          longitud:
                            type: number
                            example: -70.6693
                          precio_uf:
                            type: number
                            example: 1000000
                          precio_usd:
                            type: number
                            example: 1000000
                          estado_aprobado:
                            type: integer
                            example: 0
                          estado:
                            type: integer
                            example: 1
                          estado_nombre:
                            type: string
                            example: "Activo"
                          estado_solicitud:
                            type: integer
                            example: 5
                          estado_solicitud_nombre:
                            type: string
                            example: "Inactivo"
                          url_portada:
                            type: string
                            example: "http://localhost:8888/images?image=abb255e1fe98ed8331a6d0b0521ee828.jpg"
                          fecha_creacion:
                            type: string
                            format: date
                            example: "2025-10-20"
                          porcentaje_comision:
                            type: number
                            example: 0
                          monto_comision:
                            type: number
                            example: 0
                          precio_final:
                            type: integer
                            example: 100000
                          imagenes:
                            type: array
                            items:
                              type: string
                            example:
                              - "http://localhost:8888/images?image=abb255e1fe98ed8331a6d0b0521ee828.jpg"
                              - "http://localhost:8888/images?image=ef0ecbcd717f9caf363aa0ec703fffd8.jpg"
                          usuario_creador:
                            type: string
                            example: "Alessandro Venegas"
      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

list_propiedad:
  get:
    tags:
      - Propiedad
    operationId: getPropiedadById
    description: Obtiene el detalle de una propiedad por su propiedad_id.
    parameters:
      - name: propiedad_id
        in: query
        description: ID de la propiedad
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Consulta exitosa.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Consulta Exitosa.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  type: object
                  properties:
                    id:
                      type: integer
                      example: 1
                    titulo:
                      type: string
                      example: "Propiedad 1"
                    anio:
                      type: string
                      example: "2020"
                    descripcion:
                      type: string
                      example: "Propiedad 1 descripcion"
                    categoria_id:
                      type: integer
                      example: 2
                    categoria_nombre:
                      type: string
                      example: "Departamento"
                    categoria_nombre_ingles:
                      type: string
                      example: "Apartment"
                    condicion_id:
                      type: integer
                      example: 1
                    condicion_nombre:
                      type: string
                      example: "Vendida"
                    condicion_nombre_ingles:
                      type: string
                      example: "Sold"
                    pais_id:
                      type: integer
                      example: 41
                    pais_nombre:
                      type: string
                      example: "Chile"
                    pais_nombre_ingles:
                      type: string
                      example: "Chile"
                    ciudad:
                      type: string
                      example: "Santiago"
                    caracteristicas:
                      type: object
                      example:
                        baños: 2
                        cuartos: 2
                        Cochera: "Sí"
                    metros_construccion:
                      type: integer
                      example: 1000
                    metros_terreno:
                      type: integer
                      example: 15000
                    pies_construccion:
                      type: number
                      example: 10764
                    pies_terreno:
                      type: number
                      example: 157640
                    latitud:
                      type: number
                      example: -33.4489
                    longitud:
                      type: number
                      example: -70.6693
                    precio_uf:
                      type: number
                      example: 1000000
                    precio_usd:
                      type: number
                      example: 1000000
                    imagenes:
                      type: array
                      items:
                        type: object
                        properties:
                          imagen_id:
                            type: integer
                            example: 1
                          imagen_url:
                            type: string
                            example: "http://localhost:8888/images?image=abb255e1fe98ed8331a6d0b0521ee828.jpg"
                          estado:
                            type: integer
                            example: 1
                          tipo_imagen:
                            type: string
                            example: "portada"
                          orden:
                            type: integer
                            example: 0
                      example:
                        - imagen_id: 1
                          imagen_url: "http://localhost:8888/images?image=abb255e1fe98ed8331a6d0b0521ee828.jpg"
                          estado: 1
                          tipo_imagen: "portada"
                          orden: 0
                        - imagen_id: 2
                          imagen_url: "http://localhost:8888/images?image=ef0ecbcd717f9caf363aa0ec703fffd8.jpg"
                          estado: 1
                          tipo_imagen: "imagen"
                          orden: 1
      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

save:
  post:
    tags:
      - Propiedad
    operationId: savePropiedad
    description: Guarda una nueva propiedad
    requestBody:
      required: true
      content:
        application/form-data:
          schema:
            type: object
            required:
              - titulo
              - descripcion
              - pais_id
              - categoria_id
              - condicion_id
              - caracteristicas
              - metros_construccion
              - metros_terreno
              - latitud
              - longitud
              - precio_uf
              - precio_usd
              - tipo_moneda
            properties:
              titulo:
                type: string
                example: "Casa en Miraflores"
              anio:
                type: integer
                example: 2023
              descripcion:
                type: string
                example: "Casa de 2 pisos, 3 dormitorios, cerca al parque."
              pais_id:
                type: integer
                example: 1
              ciudad:
                type: string
                example: "Lima"
              categoria_id:
                type: integer
                example: 1
              condicion_id:
                type: integer
                example: 1
              caracteristicas:
                type: string
                example: '{"baños": 2, "cuartos": 2, "Cochera": "Sí"}'
              metros_construccion:
                type: number
                example: 100
              metros_terreno:
                type: number
                example: 120
              latitud:
                type: number
                example: -12.0464
              longitud:
                type: number
                example: -77.0428
              precio_uf:
                type: number
                description: Precio en UF
                example: 250000
              precio_usd:
                type: number
                description: Precio de la propiedad en USD
                example: 100000
              tipo_moneda:
                type: string
                description: Tipo de moneda
                example: "UF"
              portada:
                type: string
                format: binary
                description: Imagen de portada
              imagenes:
                type: array
                items:
                  type: object
                  properties:
                    imagen_id:
                      type: integer
                      example: 1
                    imagen_url:
                      type: string
                      example: "https://nextdet.com/images/propiedad/1.jpg"
    responses:
      200:
        description: Consulta exitosa.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Acción exitosa.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  type: object
                  example: []
      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

update:
  post:
    tags:
      - Propiedad
    operationId: updatePropiedad
    description: Actualiza los datos de una propiedad existente.
    requestBody:
      required: true
      content:
        application/form-data:
          schema:
            type: object
            properties:
              propiedad_id:
                type: integer
                description: ID único de la propiedad a actualizar
                example: 1
              titulo:
                type: string
                description: Título de la propiedad
                example: "Propiedad en Venta"
              anio:
                type: string
                description: Año de la propiedad
                example: "2021"
              descripcion:
                type: string
                description: Descripción de la propiedad
                example: "Propiedad ubicada en el centro de la ciudad"
              categoria_id:
                type: integer
                description: ID de la categoría
                example: 2
              condicion_id:
                type: integer
                description: ID de la condición
                example: 1
              pais_id:
                type: integer
                description: ID del país
                example: 41
              ciudad:
                type: string
                description: Ciudad de la propiedad
                example: "Santiago"
              caracteristicas:
                type: string
                description: Características de la propiedad en formato JSON
                example: '{"baños":2,"cuartos":3,"Cochera":"Sí"}'
              metros_construccion:
                type: integer
                description: Metros construidos
                example: 120
              metros_terreno:
                type: integer
                description: Metros de terreno
                example: 150
              latitud:
                type: number
                description: Latitud de la propiedad
                example: -33.4489
              longitud:
                type: number
                description: Longitud de la propiedad
                example: -70.6693
              precio_uf:
                type: integer
                description: Precio de la propiedad en UF
                example: 160000
              precio_usd:
                type: integer
                description: Precio de la propiedad en USD
                example: 100000
              tipo_moneda:
                type: string
                description: Tipo de moneda
                example: "UF"
              imagenes:
                type: string
                description: String en formato JSON que representa un array de objetos con los datos de las imágenes.
                example: '[{"imagen_id":1,"imagen_url":"https://dev-api.nextdet.com/images?image=53da3d2a124b428e7aafcb7a17c9632e.png","estado":1, "tipo_imagen": "imagen", "orden": 1}]'
              imagenes_nuevas[]:
                type: string
                format: binary
                description: Imagenes de la propiedad
                example: "imagen.png"
              imagenes_nuevas_orden:
                type: string
                description: String en formato JSON que representa un array de números con el orden de las imágenes nuevas.
                example: '[1,2,3]'
              portada:
                type: string
                format: binary
                description: Portada de la propiedad en caso se quiera actualizar la existente
                example: "portada.png"
    responses:
      200:
        description: Propiedad actualizada exitosamente.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Propiedad actualizada correctamente.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  type: object
                  example: []
      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

aprobar:
  put:
    tags:
      - Propiedad
    operationId: aprobarPropiedadById
    description: Aprueba una propiedad por su propiedad_id.
    parameters:
      - name: propiedad_id
        in: path
        description: ID de la propiedad a aprobar
        required: true
        schema:
          type: integer
          example: 1
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              porcentaje_comision:
                type: integer
                description: Porcentaje de comisión
                example: 10
              monto_comision:
                type: integer
                description: Monto de comisión
                example: 10000
              estado_aprobado:
                type: boolean
                description: Estado de aprobación
                example: true
    responses:
      200:
        description: Propiedad aprobada correctamente.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Propiedad aprobada correctamente.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  type: object
                  example: []
      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

delete:
  put:
    tags:
      - Propiedad
    operationId: putDeletePropiedad
    description: Elimina (marcado lógico) una propiedad existente por su propiedad_id.
    parameters:
      - name: propiedad_id
        in: path
        description: ID único de la propiedad a eliminar
        required: true
        schema:
          type: integer
    requestBody:
      required: false
      content:
        application/json:
          schema:
            type: object
            properties: {}
    responses:
      200:
        description: Propiedad eliminada correctamente.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Propiedad eliminada correctamente.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  type: object
                  example: []
      404:
        description: "Petición no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

send_solicitud:
  post:
    tags:
      - Propiedad
    operationId: postEnviarSolicitudPropiedad
    description: Envía una solicitud de propiedad.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              propiedad_id:
                type: integer
                description: ID de la propiedad
                example: 1
              nombre_cliente:
                type: string
                description: Nombre del cliente
                example: "Juan Perez"
              email:
                type: string
                description: Email del cliente
                example: "juan.perez@example.com"
              telefono:
                type: string
                description: Teléfono del cliente
                example: "930506234"
              mensaje:
                type: string
                description: Mensaje del cliente
                example: "Quiero más información sobre la propiedad"
              idioma:
                type: string
                description: Idioma de la solicitud
                example: "es"
    responses:
      200:
        description: Propiedad enviada correctamente.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Propiedad enviada correctamente.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  type: object
                  example: []
      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

list_solicitudes:
  get:
    tags:
      - Propiedad
    operationId: getSolicitudesPropiedades
    description: Obtiene todas las solicitudes de propiedades.
    parameters:
      - name: propiedad_id
        in: query
        description: ID de la propiedad
        required: false
        schema:
          type: integer
      - name: categoria_propiedad_id
        in: query
        description: ID de la categoría de la propiedad
        required: false
        schema:
          type: integer
      - name: condicion_propiedad_id
        in: query
        description: ID de la condición de la propiedad
        required: false
        schema:
          type: integer
      - name: estado_solicitud
        in: query
        description: ID del estado de la solicitud
        required: false
        schema:
          type: integer
      - name: busqueda
        in: query
        description: Busqueda de solicitudes de propiedades
        required: false
        schema:
          type: string
        example: "Solicitud"
      - name: fecha_desde
        in: query
        description: Fecha desde (formato YYYY-MM-DD)
        required: false
        schema:
          type: string
          format: date
      - name: fecha_hasta
        in: query
        description: Fecha hasta (formato YYYY-MM-DD)
        required: false
        schema:
          type: string
          format: date
      - name: page
        in: query
        description: Número de página
        required: false
        schema:
          type: integer
      - name: page_row
        in: query
        description: Número de filas por página
        required: false
        schema:
          type: integer
    responses:
      200:
        description: Consulta exitosa.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Consulta Exitosa.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  type: object
                  properties:
                    total:
                      type: integer
                      example: 1
                    solicitudes_propiedades:
                      type: array
                      items:
                        $ref: "../schemas/solicitudPropiedad.yml#/SolicitudPropiedad"
      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

solicitud_propiedad:
  get:
    tags:
      - Propiedad
    operationId: getSolicitudPropiedad
    description: Obtiene el detalle de una solicitud de propiedad por su solicitud_propiedad_id.
    parameters:
      - name: solicitud_propiedad_id
        in: query
        description: ID de la solicitud de propiedad
        required: true
        schema:
          type: integer
    responses:
      200:
        description: Consulta exitosa.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Consulta Exitosa.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  type: object
                  $ref: "../schemas/solicitudPropiedad.yml#/SolicitudPropiedad"
      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

change_estado_solicitud:
  post:
    tags:
      - Propiedad
    operationId: postChangeEstadoSolicitudPropiedad
    description: Cambia el estado de una solicitud de propiedad.
    requestBody:
      content:
        application/json:
          schema:
            type: object
            required:
              - solicitud_propiedad_id
              - estado_solicitud
            properties:
              solicitud_propiedad_id:
                type: integer
                description: ID de la solicitud de propiedad
                example: 1
              estado_solicitud:
                type: integer
                description: ID del estado de la solicitud
                example: 1
              comentario:
                type: string
                description: Comentario de la solicitud
                example: "Comentario de la solicitud"
              reserva_monto:
                type: number
                description: Monto de la reserva
                example: 100000
              venta_monto:
                type: number
                description: Monto de la venta
                example: 100000
              arriendo_monto:
                type: number
                description: Monto de la arriendo
                example: 100000
              arriendo_fecha_inicio:
                type: string
                description: Fecha de inicio de la arriendo
                example: "2026-01-01"
              arriendo_fecha_fin:
                type: string
                description: Fecha de fin de la arriendo
                example: 100000
      responses:
        200:
          description: Estado de la solicitud de propiedad cambiado correctamente.
          content:
            application/json:
              schema:
                type: object
                properties:
                  estado:
                    type: string
                    example: OK
                  mensaje:
                    type: string
                    example: Estado de la solicitud de propiedad cambiado correctamente.
                  tipo_error:
                    type: integer
                    example: 0
                  datos:
                    type: object
                    example: []
        404:
          description: "Petición no ejecutada."
          content:
            application/json:
              schema:
                type: object
                properties:
                  estado:
                    type: string
                    example: ERR
                  mensaje:
                    type: string
                    example: No se realizo el cambio de estado de la solicitud de propiedad.
                  tipo_error:
                    type: integer
                    example: 1
                  datos:
                    type: object
                    example: []

contacto_list:
  get:
    tags:
      - Propiedad
    operationId: listContactoPropiedad
    description: Listamos los contactos
    parameters:
      - name: pais_id
        in: query
        description: ID del país
        required: false
        schema:
          type: integer
      - name: busqueda
        in: query
        description: Búsqueda
        required: false
        schema:
          type: string
      - name: page
        in: query
        description: Página
        required: false
        schema:
          type: integer
      - name: page_row
        in: query
        description: Filas por página
        required: false
        schema:
          type: integer
    security:
      - BearerAuth: []
    responses:
      200:
        description: Consulta exitosa.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Acción exitosa.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  type: object
                  properties:
                    total:
                      type: integer
                      example: 1
                    contactos:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          nombre:
                            type: string
                            example: "Nombre del contacto"
                          email:
                            type: string
                            example: "example@gmail.com"
                          telefono:
                            type: string
                            example: "930506234"
                          pais_id:
                            type: integer
                            example: 183
                          pais_nombre:
                            type: string
                            example: "Perú"
                          pais_nombre_ingles:
                            type: string
                            example: "Peru"
                          estado:
                            type: integer
                            example: 1
                          estado_nombre:
                            type: string
                            example: "Activo"

      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

contacto_list_contacto:
  get:
    tags:
      - Propiedad
    operationId: listOnlyContactoPropiedad
    description: Listamos un contacto
    parameters:
      - name: contacto_propiedad_id
        in: query
        description: ID del contacto
        required: true
        schema:
          type: integer
    security:
      - BearerAuth: []
    responses:
      200:
        description: Consulta exitosa.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Acción exitosa.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  type: object
                  properties:
                    id:
                      type: integer
                      example: 1
                    nombre:
                      type: string
                      example: "Nombre del contacto"
                    email:
                      type: string
                      example: "example@gmail.com"
                    telefono:
                      type: string
                      example: "930506234"
                    pais_id:
                      type: integer
                      example: 183
                    pais_nombre:
                      type: string
                      example: "Perú"
                    pais_nombre_ingles:
                      type: string
                      example: "Peru"
                    estado:
                      type: integer
                      example: 1
                    estado_nombre:
                      type: string
                      example: "Activo"
      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

contacto_save:
  post:
    tags:
      - Propiedad
    operationId: saveContactoPropiedad
    description: Guardamos un contacto
    requestBody:
      content:
        application/json:
          schema:
            type: object
            required:
              - nombre
              - email
              - telefono
              - pais_id
            properties:
              nombre:
                type: string
                description: Nombre del contacto
                example: "Nombre del contacto"
              empresa:
                type: string
                description: Empresa del contacto
                example: "Empresa del contacto"
              email:
                type: string
                description: Email del contacto
                example: "example@gmail.com"
              telefono:
                type: string
                description: Teléfono del contacto
                example: "930506234"
              pais_id:
                type: integer
                description: ID del país
                example: 183
    security:
      - BearerAuth: []
    responses:
      200:
        description: Consulta exitosa.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Acción exitosa.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  example: []
      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

contacto_update:
  put:
    tags:
      - Propiedad
    operationId: updateContactoPropiedad
    description: Actualizamos un contacto
    parameters:
      - name: contacto_propiedad_id
        in: path
        description: ID del contacto
        required: true
        schema:
          type: integer
    requestBody:
      content:
        application/json:
          schema:
            type: object
            required:
              - nombre
              - email
              - telefono
            properties:
              nombre:
                type: string
                description: Nombre del contacto
                example: "Nombre del contacto"
              empresa:
                type: string
                description: Empresa del contacto
                example: "Empresa del contacto"
              email:
                type: string
                description: Email del contacto
                example: "example@gmail.com"
              telefono:
                type: string
                description: Teléfono del contacto
                example: "930506234"
              pais_id:
                type: integer
                description: ID del país
                example: 183
    security:
      - BearerAuth: []
    responses:
      200:
        description: Consulta exitosa.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Acción exitosa.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  example: []
      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

contacto_delete:
  put:
    tags:
      - Propiedad
    operationId: deleteContactoPropiedad
    description: Eliminamos un contacto
    parameters:
      - name: contacto_propiedad_id
        in: path
        description: ID del contacto
        required: true
        schema:
          type: integer
    security:
      - BearerAuth: []
    responses:
      200:
        description: Consulta exitosa.
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: OK
                mensaje:
                  type: string
                  example: Acción exitosa.
                tipo_error:
                  type: integer
                  example: 0
                datos:
                  example: []
      404:
        description: "Peticion no ejecutada."
        content:
          application/json:
            schema:
              type: object
              properties:
                estado:
                  type: string
                  example: ERR
                mensaje:
                  type: string
                  example: No se realizo la acción solicitada.
                tipo_error:
                  type: integer
                  example: 1
                datos:
                  type: object
                  example: []

send_pin:
    get:
      tags:
        - Propiedad
      operationId: sendPinPropiedad
      description: Enviar un PIN al correo del usuario para verificación
      parameters:
        - name: email
          in: query
          description: Correo del usuario
          required: true
          schema:
            type: string
        - name: nombres
          in: query
          description: Nombre del usuario
          required: true
          schema:
            type: string
      responses:
        200:
          description: Codigo de verificación enviado correctamente.
          content:
            application/json:
              schema:
                type: object
                properties:
                  estado:
                    type: string
                    example: OK
                  mensaje:
                    type: string
                    example: Acción exitosa.
                  tipo_error:
                    type: integer
                    example: 0
                  datos:
                    type: object
                    example: []
        404:
          description: "Peticion no ejecutada."
          content:
            application/json:
              schema:
                type: object
                properties:
                  estado:
                    type: string
                    example: ERR
                  mensaje:
                    type: string
                    example: No se realizo la acción solicitada.
                  tipo_error:
                    type: integer
                    example: 1
                  datos:
                    type: object
                    example: []

validar_pin:
    post:
      tags:
        - Propiedad
      operationId: validarPinPropiedad
      description: Validar el PIN enviado al correo del usuario
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - pin
              properties:
                email:
                  type: string
                  description: Correo del usuario
                  example: "example@gmail.com"
                pin:                  
                  type: string
                  description: Código PIN enviado al correo
                  example: "1234"
      responses:
        200:
          description: Código de verificación validado correctamente.
          content:
            application/json:
              schema:
                type: object
                properties:
                  estado:
                    type: string
                    example: OK
                  mensaje:
                    type: string
                    example: Acción exitosa.
                  tipo_error:
                    type: integer
                    example: 0
                  datos:
                    type: object
                    example: []
        404:
          description: "Peticion no ejecutada."
          content:
            application/json:
              schema:
                type: object
                properties:
                  estado:
                    type: string
                    example: ERR
                  mensaje:
                    type: string
                    example: No se realizo la acción solicitada.
                  tipo_error:
                    type: integer
                    example: 1
                  datos:
                    type: object
                    example: []

save_propiedad:
    post:
      tags:
        - Propiedad
      operationId: Crear usuario y propiedad
      description: Crea un nuevo usuario y propiedad. Recibe JSON dentro de campos form-data.
      requestBody:
        required: true
        content:
          application/form-data:
            schema:
              type: object
              properties:
                usuario:
                  type: object
                  description: JSON string con los datos del usuario
                  properties:
                    email:
                      type: string
                      example: "nombre@example.com"
                    nombres:
                      type: string
                      example: "Nombre"
                propiedad:
                  type: object
                  description: JSON string con los datos de la propiedad
                  properties:
                    titulo:
                      type: string
                      example: "Propiedad Prueba"
                    anio:
                      type: string
                      example: "2025"
                    descripcion:
                      type: string
                      example: "Propiedad Prueba descripción"
                    pais_id:
                      type: string
                      example: "1"
                    ciudad:
                      type: string
                      example: "Kabul"
                    categoria_id:
                      type: string
                      example: "2"
                    condicion_id:
                      type: string
                      example: "1"
                    caracteristicas:
                      type: string
                      description: JSON string con las características
                      example: '{"baños": 5, "cuartos": 7, "Cochera": "No"}'
                    metros_construccion:
                      type: string
                      example: "2000"
                    metros_terreno:
                      type: string
                      example: "15001"
                    precio_uf:
                      type: string
                      example: "10000"
                    precio_usd:
                      type: string
                      example: "10000"
                    latitud:
                      type: string
                      example: "-12.046373159482"
                    longitud:
                      type: string
                      example: "40.712776003948"
                imagenes:
                  type: array
                  description: Lista de archivos (imágenes)
                  items:
                    type: string
                    format: binary
            encoding:
              usuario:
                contentType: application/json
              propiedad:
                contentType: application/json
              imagenes:
                contentType: image/*
      responses:
        200:
          description: Usuario y propiedad creados correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  estado:
                    type: string
                    example: OK
                  mensaje:
                    type: string
                    example: Acción exitosa.
                  tipo_error:
                    type: integer
                    example: 0
                  datos:
                    type: object
                    example: []
        404:
          description: "Peticion no ejecutada."
          content:
            application/json:
              schema:
                type: object
                properties:
                  estado:
                    type: string
                    example: ERR
                  mensaje:
                    type: string
                    example: No se realizo la acción solicitada.
                  tipo_error:
                    type: integer
                    example: 1
                  datos:
                    type: object
                    example: []
